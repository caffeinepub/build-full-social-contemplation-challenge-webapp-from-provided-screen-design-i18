{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Live VU meter during recording and remove waveform visualization",
  "requirements": [
    {
      "id": "REQ-1",
      "summary": "Remove waveform visualization from the recording and review UI so no empty waveform area is shown.",
      "acceptanceCriteria": [
        "When `isRecording` is true, the UI does not render `RecordingWaveform` (no canvas/placeholder waveform area is visible).",
        "No waveform is shown during recording or in the review state after recording.",
        "The rest of the record → stop → review → upload flow remains unchanged."
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/AudioRecorder.tsx",
          "operation": "modify",
          "description": "Remove the `RecordingWaveform` import and JSX from the recording state (and ensure it is not rendered in review either). Keep existing record/stop/review/upload/delete behaviors unchanged."
        }
      ]
    },
    {
      "id": "REQ-2",
      "summary": "Make the live input level (VU meter) reliably start and update in real time across iOS/Safari and desktop after the user starts recording.",
      "acceptanceCriteria": [
        "While recording, the `RecordingLevelMeter` is visible and updates multiple times per second as audio is detected (level changes are observable when speaking/clapping).",
        "On iOS/Safari and desktop browsers, the audio analysis starts successfully after the user taps “Start Recording” (e.g., AudioContext is resumed from a user gesture if needed).",
        "If microphone permission is denied or no microphone exists, an English error message is shown (existing error behavior preserved)."
      ],
      "file_operations": [
        {
          "path": "frontend/src/hooks/useAudioRecording.ts",
          "operation": "modify",
          "description": "Ensure the Web Audio analysis chain reliably runs after the user gesture by resuming the `AudioContext` when needed before starting the level-monitoring loop; keep existing permission-denied and no-microphone error messages/behavior intact. Ensure the `level` state continues to update multiple times per second during recording."
        }
      ]
    },
    {
      "id": "REQ-3",
      "summary": "Remove waveform-related state and interfaces so waveform samples are no longer computed or stored while recording.",
      "acceptanceCriteria": [
        "`useAudioRecording` no longer exposes `waveformSamples` and does not update waveform sample arrays during `updateAudioLevel`.",
        "Any waveform-only components/props are removed from the active render path of the app (no unused waveform data is required by `AudioRecorder`).",
        "Recording still produces a playable `recordedBlob`/`recordedUrl`, and upload continues to work as before."
      ],
      "file_operations": [
        {
          "path": "frontend/src/hooks/useAudioRecording.ts",
          "operation": "modify",
          "description": "Remove `waveformSamples` from the `AudioRecordingState` interface, React state, cleanup/reset logic, return value, and from the `updateAudioLevel` loop so no waveform sample arrays are computed/stored. Keep recorded blob/url creation and cleanup behavior unchanged."
        },
        {
          "path": "frontend/src/components/AudioRecorder.tsx",
          "operation": "modify",
          "description": "Update `useAudioRecording()` destructuring and component usage to remove `waveformSamples` from the interface and eliminate any waveform-only props/usage so `AudioRecorder` depends only on level meter + recording/review/upload controls."
        }
      ]
    }
  ]
}